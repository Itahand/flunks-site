{
  "version": "1.0.0",
  "name": "Claim Halloween GumDrop",
  "description": "Claim your special GUM reward during limited-time events. Flunk holders only!",
  "icon": "ðŸŽƒ",
  "metadata": {
    "author": "Flunks Community",
    "website": "https://flunks.net",
    "category": "reward"
  },
  "cadence": {
    "type": "transaction",
    "network": "mainnet",
    "code": "import SemesterZero from 0x807c3d470888cc48\nimport NonFungibleToken from 0x1d7e57aa55817448\n\ntransaction(username: String, timezoneOffset: Int) {\n  prepare(signer: auth(Storage, Capabilities) &Account) {\n    let profileExists = signer.storage.borrow<&SemesterZero.UserProfile>(from: SemesterZero.UserProfileStoragePath) != nil\n    if !profileExists {\n      let profile <- SemesterZero.createUserProfile(username: username, timezone: timezoneOffset)\n      signer.storage.save(<-profile, to: SemesterZero.UserProfileStoragePath)\n      let cap = signer.capabilities.storage.issue<&SemesterZero.UserProfile>(SemesterZero.UserProfileStoragePath)\n      signer.capabilities.publish(cap, at: SemesterZero.UserProfilePublicPath)\n    }\n    let collectionExists = signer.storage.borrow<&SemesterZero.Chapter5Collection>(from: SemesterZero.Chapter5CollectionStoragePath) != nil\n    if !collectionExists {\n      let collection <- SemesterZero.createEmptyChapter5Collection()\n      signer.storage.save(<-collection, to: SemesterZero.Chapter5CollectionStoragePath)\n      let nftCap = signer.capabilities.storage.issue<&{NonFungibleToken.Receiver}>(SemesterZero.Chapter5CollectionStoragePath)\n      signer.capabilities.publish(nftCap, at: SemesterZero.Chapter5CollectionPublicPath)\n    }\n    assert(SemesterZero.isEligibleForGumDrop(user: signer.address), message: \"Not eligible or already claimed\")\n  }\n  execute {\n    log(\"GumDrop claim initiated - backend will add GUM\")\n  }\n}"
  },
  "arguments": [
    {
      "name": "username",
      "type": "String",
      "description": "Your display name"
    },
    {
      "name": "timezoneOffset",
      "type": "Int",
      "description": "Your timezone offset in hours"
    }
  ],
  "messages": {
    "title": "Claim GumDrop Reward",
    "description": "This will record your claim on the blockchain. After confirmation, you'll receive GUM in your account.",
    "confirmButton": "Claim My GUM! ðŸŽƒ",
    "successTitle": "Claimed!",
    "successDescription": "Your GumDrop has been claimed! Check your GUM balance.",
    "errorTitle": "Claim Failed",
    "errorDescription": "Unable to claim. You may have already claimed or the drop may be inactive."
  }
}
